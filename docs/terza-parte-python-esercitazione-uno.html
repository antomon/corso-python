<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it" xml:lang="it"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>20&nbsp; Esercitazione 1: web app con Flask – Da neofita di Python a campione</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./quarta-parte.html" rel="next">
<link href="./terza-parte-python-moduli.html" rel="prev">
<link href="./red-python-logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nessun risultato",
    "search-matching-documents-text": "documenti trovati",
    "search-copy-link-title": "Copiare il link nella ricerca",
    "search-hide-matches-text": "Nascondere i risultati aggiuntivi",
    "search-more-match-text": "ci sono altri risultati in questo documento",
    "search-more-matches-text": "ulteriori risultati in questo documento",
    "search-clear-button-title": "Pulire",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancellare",
    "search-submit-button-title": "Inviare",
    "search-label": "Ricerca"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.0/full/pyodide.js"></script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Da neofita di Python a campione</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Ricerca"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Attiva/disattiva la navigazione" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text">Prefazione</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://4m4.it/"> 
<span class="menu-text">4M4</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/antomon/corso-python" title="Eseguire il codice" class="quarto-navigation-tool px-1" aria-label="Eseguire il codice"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Da-neofita-di-Python-a-campione.pdf">
              <i class="bi bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="./Da-neofita-di-Python-a-campione.epub">
              <i class="bi bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
          <li>
            <a class="dropdown-item quarto-navbar-tools-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Attiva/disattiva la modalità oscura"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Attiva/disattiva la barra laterale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./terza-parte.html">Terza parte: Python orientato agli oggetti</a></li><li class="breadcrumb-item"><a href="./terza-parte-python-esercitazione-uno.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Esercitazione 1: web app con Flask</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Attiva/disattiva la barra laterale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefazione</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./prima-parte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prima parte: I fondamenti della programmazione</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Attiva/disattiva sezione">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-linguaggi-programmazione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">I linguaggi di programmazione, i programmi e i programmatori</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-paradigmi-programmazione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">I paradigmi di programmazione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-sintassi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">La sintassi dei linguaggi di programmazione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-semantica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La semantica dei linguaggi di programmazione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-variabili-spazi-nomi-moduli-file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">La variabile</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-funzioni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">La funzione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-modello-dati.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Il modello dati dei linguaggi di programmazione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-altri-concetti-semantici.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Altri concetti semantici dei linguaggi di programmazione</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prima-parte-programmazione-ia-generativa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">L’Impatto dell’intelligenza artificiale generativa sulla programmazione</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./seconda-parte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Seconda parte: Le basi di Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Attiva/disattiva sezione">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-introduzione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Introduzione a Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-installazione.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Scaricare e installare Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-sintassi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">La sintassi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-modello-dati.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Il modello dati</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-istruzioni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Istruzioni</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-funzioni.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Funzioni</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-esercizi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Esercizi</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seconda-parte-python-esercitazione-uno.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Esercitazione 1: analisi di un dataset di vendite</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./terza-parte.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Terza parte: Python orientato agli oggetti</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Attiva/disattiva sezione">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./terza-parte-python-programmazione-orientata-agli-oggetti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Programmazione orientata agli oggetti</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./terza-parte-python-moduli.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Moduli</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./terza-parte-python-esercitazione-uno.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Esercitazione 1: web app con Flask</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Quarta parte: Python avanzato</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Quinta parte: strumenti</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendici</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Attiva/disattiva sezione">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendice-riferimenti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Riferimenti</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Indice</h2>
   
  <ul>
  <li><a href="#il-problema" id="toc-il-problema" class="nav-link active" data-scroll-target="#il-problema"><span class="header-section-number">20.1</span> Il problema</a></li>
  <li><a href="#flask" id="toc-flask" class="nav-link" data-scroll-target="#flask"><span class="header-section-number">20.2</span> Flask</a>
  <ul>
  <li><a href="#installazione" id="toc-installazione" class="nav-link" data-scroll-target="#installazione"><span class="header-section-number">20.2.1</span> Installazione</a></li>
  <li><a href="#creazione-di-una-semplice-web-app" id="toc-creazione-di-una-semplice-web-app" class="nav-link" data-scroll-target="#creazione-di-una-semplice-web-app"><span class="header-section-number">20.2.2</span> Creazione di una semplice web app</a></li>
  <li><a href="#esecuzione-della-web-app" id="toc-esecuzione-della-web-app" class="nav-link" data-scroll-target="#esecuzione-della-web-app"><span class="header-section-number">20.2.3</span> Esecuzione della web app</a></li>
  <li><a href="#template" id="toc-template" class="nav-link" data-scroll-target="#template"><span class="header-section-number">20.2.4</span> Template</a></li>
  <li><a href="#jinja2" id="toc-jinja2" class="nav-link" data-scroll-target="#jinja2"><span class="header-section-number">20.2.5</span> Jinja2</a></li>
  <li><a href="#metodi-http" id="toc-metodi-http" class="nav-link" data-scroll-target="#metodi-http"><span class="header-section-number">20.2.6</span> Metodi HTTP</a></li>
  <li><a href="#per-continuare" id="toc-per-continuare" class="nav-link" data-scroll-target="#per-continuare"><span class="header-section-number">20.2.7</span> Per continuare</a></li>
  <li><a href="#esercitazione-1-web-app-con-flask" id="toc-esercitazione-1-web-app-con-flask" class="nav-link" data-scroll-target="#esercitazione-1-web-app-con-flask"><span class="header-section-number">20.2.8</span> Esercitazione 1: web app con Flask</a></li>
  </ul></li>
  <li><a href="#il-problema-1" id="toc-il-problema-1" class="nav-link" data-scroll-target="#il-problema-1"><span class="header-section-number">20.3</span> Il problema</a></li>
  <li><a href="#flask-1" id="toc-flask-1" class="nav-link" data-scroll-target="#flask-1"><span class="header-section-number">20.4</span> Flask</a>
  <ul>
  <li><a href="#installazione-1" id="toc-installazione-1" class="nav-link" data-scroll-target="#installazione-1"><span class="header-section-number">20.4.1</span> Installazione</a></li>
  <li><a href="#creazione-di-una-semplice-web-app-1" id="toc-creazione-di-una-semplice-web-app-1" class="nav-link" data-scroll-target="#creazione-di-una-semplice-web-app-1"><span class="header-section-number">20.4.2</span> Creazione di una semplice web app</a></li>
  <li><a href="#esecuzione-della-web-app-1" id="toc-esecuzione-della-web-app-1" class="nav-link" data-scroll-target="#esecuzione-della-web-app-1"><span class="header-section-number">20.4.3</span> Esecuzione della web app</a></li>
  <li><a href="#template-1" id="toc-template-1" class="nav-link" data-scroll-target="#template-1"><span class="header-section-number">20.4.4</span> Template</a></li>
  <li><a href="#jinja2-1" id="toc-jinja2-1" class="nav-link" data-scroll-target="#jinja2-1"><span class="header-section-number">20.4.5</span> Jinja2</a></li>
  <li><a href="#metodi-http-1" id="toc-metodi-http-1" class="nav-link" data-scroll-target="#metodi-http-1"><span class="header-section-number">20.4.6</span> Metodi HTTP</a></li>
  <li><a href="#per-continuare-1" id="toc-per-continuare-1" class="nav-link" data-scroll-target="#per-continuare-1"><span class="header-section-number">20.4.7</span> Per continuare</a></li>
  </ul></li>
  <li><a href="#passaggi-dellesercitazione" id="toc-passaggi-dellesercitazione" class="nav-link" data-scroll-target="#passaggi-dellesercitazione"><span class="header-section-number">20.5</span> Passaggi dell’esercitazione</a>
  <ul>
  <li><a href="#passaggio-1-creazione-di-unapplicazione-flask" id="toc-passaggio-1-creazione-di-unapplicazione-flask" class="nav-link" data-scroll-target="#passaggio-1-creazione-di-unapplicazione-flask"><span class="header-section-number">20.5.1</span> Passaggio 1: creazione di un’applicazione Flask</a></li>
  <li><a href="#passaggio-2-implementazione-della-pagina-web-per-inserimento-indirizzo" id="toc-passaggio-2-implementazione-della-pagina-web-per-inserimento-indirizzo" class="nav-link" data-scroll-target="#passaggio-2-implementazione-della-pagina-web-per-inserimento-indirizzo"><span class="header-section-number">20.5.2</span> Passaggio 2: implementazione della pagina web per inserimento indirizzo</a></li>
  <li><a href="#passaggio-3-integrazione-di-google-maps" id="toc-passaggio-3-integrazione-di-google-maps" class="nav-link" data-scroll-target="#passaggio-3-integrazione-di-google-maps"><span class="header-section-number">20.5.3</span> Passaggio 3: integrazione di Google Maps</a></li>
  <li><a href="#passaggio-4-test-dellapplicazione" id="toc-passaggio-4-test-dellapplicazione" class="nav-link" data-scroll-target="#passaggio-4-test-dellapplicazione"><span class="header-section-number">20.5.4</span> Passaggio 4: test dell’applicazione</a></li>
  </ul></li>
  <li><a href="#file" id="toc-file" class="nav-link" data-scroll-target="#file"><span class="header-section-number">20.6</span> File</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/antomon/corso-python/edit/main/terza-parte-python-esercitazione-uno.qmd" class="toc-action"><i class="bi bi-github"></i>Modifica questa pagina</a></li><li><a href="https://github.com/antomon/corso-python/blob/main/terza-parte-python-esercitazione-uno.qmd" class="toc-action"><i class="bi empty"></i>Mostra il codice</a></li><li><a href="https://github.com/antomon/corso-python/issues/new/choose" class="toc-action"><i class="bi empty"></i>Segnala un problema</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./terza-parte.html">Terza parte: Python orientato agli oggetti</a></li><li class="breadcrumb-item"><a href="./terza-parte-python-esercitazione-uno.html"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Esercitazione 1: web app con Flask</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Esercitazione 1: web app con Flask</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="il-problema" class="level2" data-number="20.1">
<h2 data-number="20.1" class="anchored" data-anchor-id="il-problema"><span class="header-section-number">20.1</span> Il problema</h2>
<p>In questa esercitazione, svilupperemo una semplice web app utilizzando Flask. L’applicazione accetterà in input un indirizzo dall’utente e mostrerà la mappa corrispondente utilizzando Google Maps, consentendo all’utente di scegliere il tipo di visualizzazione della mappa (mappa normale, satellite, terreno). Inoltre, permetteremo all’utente di visualizzare punti di interesse (POI) come ristoranti e ospedali e di tracciare un percorso tra due indirizzi.</p>
</section>
<section id="flask" class="level2" data-number="20.2">
<h2 data-number="20.2" class="anchored" data-anchor-id="flask"><span class="header-section-number">20.2</span> Flask</h2>
<p>Flask è un micro-framework per il web sviluppato in Python. È semplice da usare e molto flessibile, rendendolo ideale per piccoli progetti web e prototipi. Flask utilizza Jinja2 per il rendering dei template HTML e supporta vari metodi HTTP per la gestione delle richieste web.</p>
<section id="installazione" class="level3" data-number="20.2.1">
<h3 data-number="20.2.1" class="anchored" data-anchor-id="installazione"><span class="header-section-number">20.2.1</span> Installazione</h3>
<p>Per installare Flask, è possibile utilizzare pip:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">pip</span> install Flask</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creazione-di-una-semplice-web-app" class="level3" data-number="20.2.2">
<h3 data-number="20.2.2" class="anchored" data-anchor-id="creazione-di-una-semplice-web-app"><span class="header-section-number">20.2.2</span> Creazione di una semplice web app</h3>
<p>Iniziamo creando una semplice applicazione Flask che visualizza <code>Hello, World!</code> quando si accede alla homepage.</p>
<p>Crea un file chiamato <code>app.py</code> e aggiungi il seguente codice:</p>
<div class="sourceCode" id="annotated-cell-2"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-2-1" class="code-annotation-target"><a href="#annotated-cell-2-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-2-3" class="code-annotation-target"><a href="#annotated-cell-2-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-2-5" class="code-annotation-target"><a href="#annotated-cell-2-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-2-6" class="code-annotation-target"><a href="#annotated-cell-2-6"></a><span class="kw">def</span> hello_world():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-2-7" class="code-annotation-target"><a href="#annotated-cell-2-7"></a>  <span class="cf">return</span> <span class="st">'Hello, World!'</span></span>
<span id="annotated-cell-2-8"><a href="#annotated-cell-2-8"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-2-9" class="code-annotation-target"><a href="#annotated-cell-2-9"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-2-10" class="code-annotation-target"><a href="#annotated-cell-2-10"></a>  app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="1" data-code-annotation="1">Importiamo la classe <code>Flask</code> dal modulo <code>flask</code>. Questa classe viene utilizzata per creare un’applicazione Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="3" data-code-annotation="2">Creiamo un’istanza dell’applicazione Flask. <code>__name__</code> è una variabile speciale che indica il nome del modulo corrente. Flask usa questa variabile per sapere dove trovare risorse come i file di template e di configurazione.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="5" data-code-annotation="3">Utilizziamo il decoratore <code>@app.route('/')</code> per definire una “route” per la nostra applicazione. Una route è un URL specifico che l’utente può visitare nel browser. In questo caso, la route è la homepage, rappresentata da <code>/</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="6" data-code-annotation="4">Definiamo una funzione chiamata <code>hello_world</code> che viene eseguita quando un utente visita la route <code>/</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="7" data-code-annotation="5">La funzione <code>hello_world</code> restituisce una stringa <code>'Hello, World!'</code>. Questo è il contenuto che verrà visualizzato nel browser dell’utente quando visiterà la homepage dell’applicazione.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="9" data-code-annotation="6">Controlliamo se lo script è eseguito direttamente (non importato come modulo in un altro script). Se è così, eseguiamo il codice nel blocco.</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="10" data-code-annotation="7">Avviamo l’applicazione Flask. <code>app.run(debug=True)</code> avvia un server web integrato che esegue l’applicazione. L’opzione <code>debug=True</code> abilita la modalità di debug, che fornisce informazioni dettagliate sugli errori e ricarica automaticamente l’applicazione quando i file di codice vengono modificati.</span>
</dd>
</dl>
</section>
<section id="esecuzione-della-web-app" class="level3" data-number="20.2.3">
<h3 data-number="20.2.3" class="anchored" data-anchor-id="esecuzione-della-web-app"><span class="header-section-number">20.2.3</span> Esecuzione della web app</h3>
<p>Per eseguire l’applicazione, utilizza il comando:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">python</span> app.py</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Naviga verso <code>http://127.0.0.1:5000/</code> nel browser per vedere il risultato.</p>
</section>
<section id="template" class="level3" data-number="20.2.4">
<h3 data-number="20.2.4" class="anchored" data-anchor-id="template"><span class="header-section-number">20.2.4</span> Template</h3>
<p>Flask utilizza Jinja2 come motore di template. I template permettono di separare la logica dell’applicazione dalla presentazione. Possiamo creare file HTML che contengono variabili e istruzioni di controllo che vengono sostituite con i dati reali al momento del rendering.</p>
<p>Per utilizzare i template, crea una cartella chiamata <code>templates</code> nella directory del tuo progetto. All’interno di <code>templates</code>, crea un file chiamato <code>index.html</code>:</p>
<div class="sourceCode" id="annotated-cell-4"><pre class="sourceCode numberSource html code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode html"><span id="annotated-cell-4-1"><a href="#annotated-cell-4-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="annotated-cell-4-2"><a href="#annotated-cell-4-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-4-3"><a href="#annotated-cell-4-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-4-4" class="code-annotation-target"><a href="#annotated-cell-4-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Home<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-4-5"><a href="#annotated-cell-4-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-4-6"><a href="#annotated-cell-4-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-4-7" class="code-annotation-target"><a href="#annotated-cell-4-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{ title }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-4-8" class="code-annotation-target"><a href="#annotated-cell-4-8"></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>{{ message }}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-4-9"><a href="#annotated-cell-4-9"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-4-10"><a href="#annotated-cell-4-10"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="4" data-code-annotation="1">Titolo della pagina: Il titolo della pagina HTML, visualizzato nella barra del titolo del browser.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="7" data-code-annotation="2">Variabile Jinja2 per il titolo: Variabile Jinja2 <code>title</code> che sarà sostituita con il valore passato dal codice Python.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="8" data-code-annotation="3">Variabile Jinja2 per il messaggio: Variabile Jinja2 <code>message</code> che sarà sostituita con il valore passato dal codice Python.</span>
</dd>
</dl>
<p>Aggiorniamo <code>app.py</code> per utilizzare il template <code>index.html</code>:</p>
<div class="sourceCode" id="annotated-cell-5"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-5-1" class="code-annotation-target"><a href="#annotated-cell-5-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template</span>
<span id="annotated-cell-5-2"><a href="#annotated-cell-5-2"></a></span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-5-4"><a href="#annotated-cell-5-4"></a></span>
<span id="annotated-cell-5-5"><a href="#annotated-cell-5-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="annotated-cell-5-6"><a href="#annotated-cell-5-6"></a><span class="kw">def</span> home():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-5-7" class="code-annotation-target"><a href="#annotated-cell-5-7"></a>  <span class="cf">return</span> render_template(<span class="st">'index.html'</span>,</span>
<span id="annotated-cell-5-8"><a href="#annotated-cell-5-8"></a>                         title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="annotated-cell-5-9"><a href="#annotated-cell-5-9"></a>                         message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>)</span>
<span id="annotated-cell-5-10"><a href="#annotated-cell-5-10"></a></span>
<span id="annotated-cell-5-11"><a href="#annotated-cell-5-11"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="annotated-cell-5-12"><a href="#annotated-cell-5-12"></a>  app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="1" data-code-annotation="1">Importiamo la funzione <code>render_template</code> da Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="7" data-code-annotation="2">Utilizziamo <code>render_template</code> nella funzione <code>home</code> per renderizzare il template <code>index.html</code> e passare i valori per <code>title</code> e <code>message</code>.</span>
</dd>
</dl>
</section>
<section id="jinja2" class="level3" data-number="20.2.5">
<h3 data-number="20.2.5" class="anchored" data-anchor-id="jinja2"><span class="header-section-number">20.2.5</span> Jinja2</h3>
<p>Jinja2 è il motore di template utilizzato da Flask. Permette di inserire variabili, eseguire cicli e condizioni, e molto altro nei file HTML.</p>
<p>Sintassi di base di Jinja2:</p>
<ul>
<li><p>Variabili <code>{ variabile }</code>.</p></li>
<li><p>Condizioni <code>{% if condizione %} ... {% endif %}</code>.</p></li>
<li><p>Cicli <code>{% for item in lista %} ... {% endfor %}</code>.</p></li>
</ul>
<p>Esempio con ciclo e condizione:</p>
<p>Aggiorniamo <code>index.html</code> per includere un ciclo e una condizione:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Home<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{ title }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>{{ message }}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  {% for item in items %}</span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>{% if item == 'Special' %}<span class="dt">&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>{{ item }}<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>{% else %}{{ item }}{% endif %}<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  {% endfor %}</span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aggiorniamo <code>app.py</code> per passare una lista di elementi al template:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="kw">def</span> home():</span>
<span id="cb4-7"><a href="#cb4-7"></a>  items <span class="op">=</span> [<span class="st">'Item 1'</span>, <span class="st">'Item 2'</span>, <span class="st">'Special'</span>, <span class="st">'Item 3'</span>]</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="cf">return</span> render_template(<span class="st">'index.html'</span>, </span>
<span id="cb4-10"><a href="#cb4-10"></a>                          title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="cb4-11"><a href="#cb4-11"></a>                          message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>, </span>
<span id="cb4-12"><a href="#cb4-12"></a>                          items<span class="op">=</span>items)</span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb4-15"><a href="#cb4-15"></a>  app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="metodi-http" class="level3" data-number="20.2.6">
<h3 data-number="20.2.6" class="anchored" data-anchor-id="metodi-http"><span class="header-section-number">20.2.6</span> Metodi HTTP</h3>
<p>Flask supporta vari metodi HTTP, inclusi GET e POST, che sono i più comunemente utilizzati. I metodi HTTP sono modi standard per inviare e ricevere dati tra il client (come il browser web) e il server. In Flask, dobbiamo considerare questi metodi perché determinano come i dati vengono inviati e ricevuti dall’applicazione. Ad esempio, il metodo GET viene utilizzato per richiedere dati dal server (come caricare una pagina web), mentre il metodo POST viene utilizzato per inviare dati al server (come inviare un modulo).</p>
<p>Creiamo un semplice modulo di contatto che utilizza sia GET che POST.</p>
<p>Form HTML, da salvare in <code>templates/contact.html</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Contattaci<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Contattaci<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> method</span><span class="op">=</span><span class="st">"post"</span><span class="dt">&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"nome"</span><span class="dt">&gt;</span>Nome:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"nome"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"nome"</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"messaggio"</span><span class="dt">&gt;</span>Messaggio:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="dt">&lt;</span><span class="kw">textarea</span><span class="ot"> id</span><span class="op">=</span><span class="st">"messaggio"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"messaggio"</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">textarea</span><span class="dt">&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"submit"</span><span class="ot"> value</span><span class="op">=</span><span class="st">"Invia"</span><span class="dt">&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>  <span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aggiornamento di <code>app.py</code>:</p>
<div class="sourceCode" id="annotated-cell-9"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-9-1" class="code-annotation-target"><a href="#annotated-cell-9-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template, request</span>
<span id="annotated-cell-9-2"><a href="#annotated-cell-9-2"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-9-3" class="code-annotation-target"><a href="#annotated-cell-9-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-9-4"><a href="#annotated-cell-9-4"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-9-5" class="code-annotation-target"><a href="#annotated-cell-9-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-9-6" class="code-annotation-target"><a href="#annotated-cell-9-6"></a><span class="kw">def</span> home():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-9-7" class="code-annotation-target"><a href="#annotated-cell-9-7"></a>  items <span class="op">=</span> [<span class="st">'Item 1'</span>, <span class="st">'Item 2'</span>, <span class="st">'Special'</span>, <span class="st">'Item 3'</span>]</span>
<span id="annotated-cell-9-8"><a href="#annotated-cell-9-8"></a></span>
<span id="annotated-cell-9-9"><a href="#annotated-cell-9-9"></a>  <span class="cf">return</span> render_template(<span class="st">'index.html'</span>, </span>
<span id="annotated-cell-9-10"><a href="#annotated-cell-9-10"></a>                         title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="annotated-cell-9-11"><a href="#annotated-cell-9-11"></a>                         message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-9-12" class="code-annotation-target"><a href="#annotated-cell-9-12"></a>                         items<span class="op">=</span>items)</span>
<span id="annotated-cell-9-13"><a href="#annotated-cell-9-13"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-9-14" class="code-annotation-target"><a href="#annotated-cell-9-14"></a><span class="at">@app.route</span>(<span class="st">'/contact'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="8" onclick="event.preventDefault();">8</a><span id="annotated-cell-9-15" class="code-annotation-target"><a href="#annotated-cell-9-15"></a><span class="kw">def</span> contact():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="9" onclick="event.preventDefault();">9</a><span id="annotated-cell-9-16" class="code-annotation-target"><a href="#annotated-cell-9-16"></a>  <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="10" onclick="event.preventDefault();">10</a><span id="annotated-cell-9-17" class="code-annotation-target"><a href="#annotated-cell-9-17"></a>    nome <span class="op">=</span> request.form[<span class="st">'nome'</span>]</span>
<span id="annotated-cell-9-18"><a href="#annotated-cell-9-18"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="11" onclick="event.preventDefault();">11</a><span id="annotated-cell-9-19" class="code-annotation-target"><a href="#annotated-cell-9-19"></a>    messaggio <span class="op">=</span> request.form[<span class="st">'messaggio'</span>]</span>
<span id="annotated-cell-9-20"><a href="#annotated-cell-9-20"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="12" onclick="event.preventDefault();">12</a><span id="annotated-cell-9-21" class="code-annotation-target"><a href="#annotated-cell-9-21"></a></span>
<span id="annotated-cell-9-22"><a href="#annotated-cell-9-22"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="13" onclick="event.preventDefault();">13</a><span id="annotated-cell-9-23" class="code-annotation-target"><a href="#annotated-cell-9-23"></a>    <span class="cf">return</span> <span class="ss">f'Thank you </span><span class="sc">{</span>nome<span class="sc">}</span><span class="ss">, your message has been received.'</span></span>
<span id="annotated-cell-9-24"><a href="#annotated-cell-9-24"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="14" onclick="event.preventDefault();">14</a><span id="annotated-cell-9-25" class="code-annotation-target"><a href="#annotated-cell-9-25"></a>  <span class="cf">return</span> render_template(<span class="st">'contact.html'</span>)</span>
<span id="annotated-cell-9-26"><a href="#annotated-cell-9-26"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="15" onclick="event.preventDefault();">15</a><span id="annotated-cell-9-27" class="code-annotation-target"><a href="#annotated-cell-9-27"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="16" onclick="event.preventDefault();">16</a><span id="annotated-cell-9-28" class="code-annotation-target"><a href="#annotated-cell-9-28"></a>  app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-9" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="1" data-code-annotation="1">Importiamo <code>Flask</code>, <code>render_template</code> e <code>request</code> da Flask per gestire i dati dei moduli.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="3" data-code-annotation="2">Creiamo un’applicazione Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="5" data-code-annotation="3">Definiamo la route per la homepage con il decoratore <code>@app.route('/')</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="6" data-code-annotation="4">Definiamo la funzione <code>home</code> che viene chiamata quando la homepage viene richiesta.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="7" data-code-annotation="5">Creiamo una lista di oggetti da passare al template.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="12" data-code-annotation="6">Utilizziamo <code>render_template</code> per rendere il template <code>index.html</code> con variabili <code>title</code>, <code>message</code> e <code>items</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="14" data-code-annotation="7">Definiamo la route <code>/contact</code> che gestisce sia le richieste GET che POST.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="15" data-code-annotation="8">Definiamo la funzione <code>contact</code> che gestisce la logica per la route <code>/contact</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="16" data-code-annotation="9">Se il metodo della richiesta è POST, elaboriamo i dati del modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="17" data-code-annotation="10">Otteniamo il valore del campo <code>nome</code> dal modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="19" data-code-annotation="11">Otteniamo il valore del campo <code>messaggio</code> dal modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="21" data-code-annotation="12">Qui, è possibile aggiungere codice per elaborare i dati del modulo, come inviarli via email.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="23" data-code-annotation="13">Restituiamo un messaggio di ringraziamento con il nome dell’utente.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="25" data-code-annotation="14">Se il metodo è GET, visualizziamo il modulo di contatto.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="27" data-code-annotation="15">Eseguiamo l’applicazione Flask in modalità di debug.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="28" data-code-annotation="16">Avviamo il server Flask.</span>
</dd>
</dl>
</section>
<section id="per-continuare" class="level3" data-number="20.2.7">
<h3 data-number="20.2.7" class="anchored" data-anchor-id="per-continuare"><span class="header-section-number">20.2.7</span> Per continuare</h3>
<p>Questa introduzione copre le basi di Flask, inclusi template, Jinja2 e metodi HTTP. Flask è un framework potente e flessibile che rende lo sviluppo web con Python semplice ed efficace. Per ulteriori approfondimenti, è possibile consultare la <a href="https://flask.palletsprojects.com/">documentazione ufficiale di Flask</a>.</p>
</section>
<section id="esercitazione-1-web-app-con-flask" class="level3" data-number="20.2.8">
<h3 data-number="20.2.8" class="anchored" data-anchor-id="esercitazione-1-web-app-con-flask"><span class="header-section-number">20.2.8</span> Esercitazione 1: web app con Flask</h3>
</section>
</section>
<section id="il-problema-1" class="level2" data-number="20.3">
<h2 data-number="20.3" class="anchored" data-anchor-id="il-problema-1"><span class="header-section-number">20.3</span> Il problema</h2>
<p>In questa esercitazione, svilupperemo una semplice web app utilizzando Flask. L’applicazione accetterà in input un indirizzo dall’utente e mostrerà la mappa corrispondente utilizzando Google Maps, consentendo all’utente di scegliere il tipo di visualizzazione della mappa (mappa normale, satellite, terreno) e visualizzare i dettagli dell’indirizzo. Inoltre, sarà possibile tracciare un percorso tra due indirizzi.</p>
</section>
<section id="flask-1" class="level2" data-number="20.4">
<h2 data-number="20.4" class="anchored" data-anchor-id="flask-1"><span class="header-section-number">20.4</span> Flask</h2>
<p>Flask è un micro-framework per il web sviluppato in Python. È semplice da usare e molto flessibile, rendendolo ideale per piccoli progetti web e prototipi. Flask utilizza Jinja2 per il rendering dei template HTML e supporta vari metodi HTTP per la gestione delle richieste web.</p>
<section id="installazione-1" class="level3" data-number="20.4.1">
<h3 data-number="20.4.1" class="anchored" data-anchor-id="installazione-1"><span class="header-section-number">20.4.1</span> Installazione</h3>
<p>Per installare Flask, è possibile utilizzare pip:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a><span class="ex">pip</span> install Flask</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creazione-di-una-semplice-web-app-1" class="level3" data-number="20.4.2">
<h3 data-number="20.4.2" class="anchored" data-anchor-id="creazione-di-una-semplice-web-app-1"><span class="header-section-number">20.4.2</span> Creazione di una semplice web app</h3>
<p>Iniziamo creando una semplice applicazione Flask che visualizza <code>Hello, World!</code> quando si accede alla homepage.</p>
<p>Crea un file chiamato <code>app.py</code> e aggiungi il seguente codice:</p>
<div class="sourceCode" id="annotated-cell-11"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-11-1" class="code-annotation-target"><a href="#annotated-cell-11-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="annotated-cell-11-2"><a href="#annotated-cell-11-2"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-11-3" class="code-annotation-target"><a href="#annotated-cell-11-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-11-4"><a href="#annotated-cell-11-4"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-11-5" class="code-annotation-target"><a href="#annotated-cell-11-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-11-6" class="code-annotation-target"><a href="#annotated-cell-11-6"></a><span class="kw">def</span> hello_world():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-11-7" class="code-annotation-target"><a href="#annotated-cell-11-7"></a>    <span class="cf">return</span> <span class="st">'Hello, World!'</span></span>
<span id="annotated-cell-11-8"><a href="#annotated-cell-11-8"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-11-9" class="code-annotation-target"><a href="#annotated-cell-11-9"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-11" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-11-10" class="code-annotation-target"><a href="#annotated-cell-11-10"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-11" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="1" data-code-annotation="1">Importiamo la classe <code>Flask</code> dal modulo <code>flask</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="3" data-code-annotation="2">Creiamo un’istanza dell’applicazione Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="5" data-code-annotation="3">Utilizziamo il decoratore <code>@app.route('/')</code> per definire una route per la nostra applicazione.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="6" data-code-annotation="4">Definiamo una funzione chiamata <code>hello_world</code> che viene eseguita quando un utente visita la route <code>/</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="7" data-code-annotation="5">La funzione <code>hello_world</code> restituisce una stringa <code>'Hello, World!'</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="9" data-code-annotation="6">Controlliamo se lo script è eseguito direttamente.</span>
</dd>
<dt data-target-cell="annotated-cell-11" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-11" data-code-lines="10" data-code-annotation="7">Avviamo l’applicazione Flask in modalità debug.</span>
</dd>
</dl>
</section>
<section id="esecuzione-della-web-app-1" class="level3" data-number="20.4.3">
<h3 data-number="20.4.3" class="anchored" data-anchor-id="esecuzione-della-web-app-1"><span class="header-section-number">20.4.3</span> Esecuzione della web app</h3>
<p>Per eseguire l’applicazione, utilizza il comando:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="ex">python</span> app.py</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Naviga verso <code>http://127.0.0.1:5000/</code> nel browser per vedere il risultato.</p>
</section>
<section id="template-1" class="level3" data-number="20.4.4">
<h3 data-number="20.4.4" class="anchored" data-anchor-id="template-1"><span class="header-section-number">20.4.4</span> Template</h3>
<p>Flask utilizza Jinja2 come motore di template. I template permettono di separare la logica dell’applicazione dalla presentazione. Possiamo creare file HTML che contengono variabili e istruzioni di controllo che vengono sostituite con i dati reali al momento del rendering.</p>
<p>Per utilizzare i template, crea una cartella chiamata <code>templates</code> nella directory del tuo progetto. All’interno di <code>templates</code>, crea un file chiamato <code>index.html</code>:</p>
<div class="sourceCode" id="annotated-cell-13"><pre class="sourceCode numberSource html code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode html"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-13-3"><a href="#annotated-cell-13-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-13-4" class="code-annotation-target"><a href="#annotated-cell-13-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Home<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-13-5"><a href="#annotated-cell-13-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-13-7" class="code-annotation-target"><a href="#annotated-cell-13-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{ title }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-13-8" class="code-annotation-target"><a href="#annotated-cell-13-8"></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>{{ message }}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-13-9"><a href="#annotated-cell-13-9"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-13-10"><a href="#annotated-cell-13-10"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="4" data-code-annotation="1">Titolo della pagina.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="7" data-code-annotation="2">Variabile Jinja2 per il titolo.</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="8" data-code-annotation="3">Variabile Jinja2 per il messaggio.</span>
</dd>
</dl>
<p>Aggiorniamo <code>app.py</code> per utilizzare il template <code>index.html</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb8-4"><a href="#cb8-4"></a></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="kw">def</span> home():</span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="cf">return</span> render_template(<span class="st">'index.html'</span>, </span>
<span id="cb8-8"><a href="#cb8-8"></a>                           title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="cb8-9"><a href="#cb8-9"></a>                           message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>)</span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb8-12"><a href="#cb8-12"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li>Importiamo la funzione <code>render_template</code> da Flask.</li>
<li>Utilizziamo <code>render_template</code> nella funzione <code>home</code> per rendere il template <code>index.html</code> e passare i valori per <code>title</code> e <code>message</code>.</li>
</ol>
</section>
<section id="jinja2-1" class="level3" data-number="20.4.5">
<h3 data-number="20.4.5" class="anchored" data-anchor-id="jinja2-1"><span class="header-section-number">20.4.5</span> Jinja2</h3>
<p>Jinja2 è il motore di template utilizzato da Flask. Permette di inserire variabili, eseguire cicli e condizioni, e molto altro nei file HTML.</p>
<p>Sintassi di base di Jinja2:</p>
<ul>
<li>Variabili <code>{ variabile }</code>.</li>
<li>Condizioni <code>{% if condizione %} ... {% endif %}</code>.</li>
<li>Cicli <code>{% for item in lista %} ... {% endfor %}</code>.</li>
</ul>
<p>Aggiorniamo <code>index.html</code> per includere un ciclo e una condizione:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb9-1"><a href="#cb9-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Home<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>{{ title }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>{{ message }}<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  {% for item in items %}</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>{% if item == 'Special' %}<span class="dt">&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>{{ item }}<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span>{% else %}{{ item }}{% endif %}<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>  {% endfor %}</span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb9-15"><a href="#cb9-15"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aggiorniamo <code>app.py</code> per passare una lista di elementi al template:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="kw">def</span> home():</span>
<span id="cb10-7"><a href="#cb10-7"></a>    items <span class="op">=</span> [<span class="st">'Item 1'</span>, <span class="st">'Item 2'</span>, <span class="st">'Special'</span>, <span class="st">'Item 3'</span>]</span>
<span id="cb10-8"><a href="#cb10-8"></a>    <span class="cf">return</span> render_template(<span class="st">'index.html'</span>, </span>
<span id="cb10-9"><a href="#cb10-9"></a>                           title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="cb10-10"><a href="#cb10-10"></a>                           message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>, </span>
<span id="cb10-11"><a href="#cb10-11"></a>                           items<span class="op">=</span>items)</span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb10-14"><a href="#cb10-14"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol type="1">
<li>Definiamo una lista di oggetti da passare al template.</li>
<li>Passiamo la lista di oggetti <code>items</code> al template.</li>
</ol>
</section>
<section id="metodi-http-1" class="level3" data-number="20.4.6">
<h3 data-number="20.4.6" class="anchored" data-anchor-id="metodi-http-1"><span class="header-section-number">20.4.6</span> Metodi HTTP</h3>
<p>Flask supporta vari metodi HTTP, inclusi GET e POST, che sono i più comunemente utilizzati. I metodi HTTP sono modi standard per inviare e ricevere dati tra il client (come il browser web) e il server. In Flask, dobbiamo considerare questi metodi perché determinano come i dati vengono inviati e ricevuti dall’applicazione. Ad esempio, il metodo GET viene utilizzato per richiedere dati dal server (come caricare una pagina web), mentre il metodo POST viene utilizzato per inviare dati al server (come inviare un modulo).</p>
<p>Creiamo un semplice modulo di contatto che utilizza sia GET che POST.</p>
<p>Form HTML (templates/contact.html):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb11-1"><a href="#cb11-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Contattaci<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Contattaci<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>  <span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> method</span><span class="op">=</span><span class="st">"post"</span><span class="dt">&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"nome"</span><span class="dt">&gt;</span>Nome:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"nome"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"nome"</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"messaggio"</span><span class="dt">&gt;</span>Messaggio:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>    <span class="dt">&lt;</span><span class="kw">textarea</span><span class="ot"> id</span><span class="op">=</span><span class="st">"messaggio"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"messaggio"</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">textarea</span><span class="dt">&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"submit"</span><span class="ot"> value</span><span class="op">=</span><span class="st">"Invia"</span><span class="dt">&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aggiornamento di <code>app.py</code>:</p>
<div class="sourceCode" id="annotated-cell-18"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-18-1" class="code-annotation-target"><a href="#annotated-cell-18-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template, request</span>
<span id="annotated-cell-18-2"><a href="#annotated-cell-18-2"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-18-3" class="code-annotation-target"><a href="#annotated-cell-18-3"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-18-4"><a href="#annotated-cell-18-4"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-18-5" class="code-annotation-target"><a href="#annotated-cell-18-5"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-18-6" class="code-annotation-target"><a href="#annotated-cell-18-6"></a><span class="kw">def</span> home():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-18-7" class="code-annotation-target"><a href="#annotated-cell-18-7"></a>    items <span class="op">=</span> [<span class="st">'Item 1'</span>, <span class="st">'Item 2'</span>, <span class="st">'Special'</span>, <span class="st">'Item 3'</span>]</span>
<span id="annotated-cell-18-8"><a href="#annotated-cell-18-8"></a>    <span class="cf">return</span> render_template(<span class="st">'index.html'</span>, </span>
<span id="annotated-cell-18-9"><a href="#annotated-cell-18-9"></a>                           title<span class="op">=</span><span class="st">'Hello, World!'</span>, </span>
<span id="annotated-cell-18-10"><a href="#annotated-cell-18-10"></a>                           message<span class="op">=</span><span class="st">'Welcome to my Flask app'</span>, </span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-18-11" class="code-annotation-target"><a href="#annotated-cell-18-11"></a>                           items<span class="op">=</span>items)</span>
<span id="annotated-cell-18-12"><a href="#annotated-cell-18-12"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-18-13" class="code-annotation-target"><a href="#annotated-cell-18-13"></a><span class="at">@app.route</span>(<span class="st">'/contact'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="8" onclick="event.preventDefault();">8</a><span id="annotated-cell-18-14" class="code-annotation-target"><a href="#annotated-cell-18-14"></a><span class="kw">def</span> contact():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="9" onclick="event.preventDefault();">9</a><span id="annotated-cell-18-15" class="code-annotation-target"><a href="#annotated-cell-18-15"></a>    <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="10" onclick="event.preventDefault();">10</a><span id="annotated-cell-18-16" class="code-annotation-target"><a href="#annotated-cell-18-16"></a>        nome <span class="op">=</span> request.form[<span class="st">'nome'</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="11" onclick="event.preventDefault();">11</a><span id="annotated-cell-18-17" class="code-annotation-target"><a href="#annotated-cell-18-17"></a>        messaggio <span class="op">=</span> request.form[<span class="st">'messaggio'</span>]</span>
<span id="annotated-cell-18-18"><a href="#annotated-cell-18-18"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="12" onclick="event.preventDefault();">12</a><span id="annotated-cell-18-19" class="code-annotation-target"><a href="#annotated-cell-18-19"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="13" onclick="event.preventDefault();">13</a><span id="annotated-cell-18-20" class="code-annotation-target"><a href="#annotated-cell-18-20"></a>        <span class="cf">return</span> <span class="ss">f'Thank you </span><span class="sc">{</span>nome<span class="sc">}</span><span class="ss">, your message has been received.'</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="14" onclick="event.preventDefault();">14</a><span id="annotated-cell-18-21" class="code-annotation-target"><a href="#annotated-cell-18-21"></a>    <span class="cf">return</span> render_template(<span class="st">'contact.html'</span>)</span>
<span id="annotated-cell-18-22"><a href="#annotated-cell-18-22"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="15" onclick="event.preventDefault();">15</a><span id="annotated-cell-18-23" class="code-annotation-target"><a href="#annotated-cell-18-23"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-18" data-target-annotation="16" onclick="event.preventDefault();">16</a><span id="annotated-cell-18-24" class="code-annotation-target"><a href="#annotated-cell-18-24"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-18" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="1" data-code-annotation="1">Importiamo <code>Flask</code>, <code>render_template</code> e <code>request</code> da Flask per gestire i dati dei moduli.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="3" data-code-annotation="2">Creiamo un’applicazione Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="5" data-code-annotation="3">Definiamo la route per la homepage con il decoratore <code>@app.route('/')</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="6" data-code-annotation="4">Definiamo la funzione <code>home</code> che viene chiamata quando la homepage viene richiesta.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="7" data-code-annotation="5">Creiamo una lista di oggetti da passare al template.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="11" data-code-annotation="6">Utilizziamo <code>render_template</code> per rendere il template <code>index.html</code> con variabili <code>title</code>, <code>message</code> e <code>items</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="13" data-code-annotation="7">Definiamo la route <code>/contact</code> che gestisce sia le richieste GET che POST.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="14" data-code-annotation="8">Definiamo la funzione <code>contact</code> che gestisce la logica per la route <code>/contact</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="15" data-code-annotation="9">Se il metodo della richiesta è POST, elaboriamo i dati del modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="16" data-code-annotation="10">Otteniamo il valore del campo <code>nome</code> dal modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="17" data-code-annotation="11">Otteniamo il valore del campo <code>messaggio</code> dal modulo.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="19" data-code-annotation="12">Qui, è possibile aggiungere codice per elaborare i dati del modulo, come inviarli via email.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="20" data-code-annotation="13">Restituiamo un messaggio di ringraziamento con il nome dell’utente.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="21" data-code-annotation="14">Se il metodo è GET, visualizziamo il modulo di contatto.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="23" data-code-annotation="15">Eseguiamo l’applicazione Flask in modalità di debug.</span>
</dd>
<dt data-target-cell="annotated-cell-18" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-18" data-code-lines="24" data-code-annotation="16">Avviamo il server Flask.</span>
</dd>
</dl>
</section>
<section id="per-continuare-1" class="level3" data-number="20.4.7">
<h3 data-number="20.4.7" class="anchored" data-anchor-id="per-continuare-1"><span class="header-section-number">20.4.7</span> Per continuare</h3>
<p>Questa introduzione copre le basi di Flask, inclusi template, Jinja2 e metodi HTTP. Flask è un framework potente e flessibile che rende lo sviluppo web con Python semplice ed efficace. Per ulteriori approfondimenti, è possibile consultare la <a href="https://flask.palletsprojects.com/">documentazione ufficiale di Flask</a>.</p>
</section>
</section>
<section id="passaggi-dellesercitazione" class="level2" data-number="20.5">
<h2 data-number="20.5" class="anchored" data-anchor-id="passaggi-dellesercitazione"><span class="header-section-number">20.5</span> Passaggi dell’esercitazione</h2>
<ol type="1">
<li>Creare un’applicazione Flask.</li>
<li>Implementare della pagina web per l’inserimento dell’indirizzo.</li>
<li>Integrare Google Maps per visualizzare la mappa basata sull’indirizzo inserito.</li>
<li>Consentire la selezione del tipo di visualizzazione della mappa.</li>
<li>Visualizzare una tabella con i dettagli dell’indirizzo.</li>
<li>Permettere di tracciare un percorso tra due indirizzi.</li>
</ol>
<section id="passaggio-1-creazione-di-unapplicazione-flask" class="level3" data-number="20.5.1">
<h3 data-number="20.5.1" class="anchored" data-anchor-id="passaggio-1-creazione-di-unapplicazione-flask"><span class="header-section-number">20.5.1</span> Passaggio 1: creazione di un’applicazione Flask</h3>
<p>Il primo passo è creare una semplice applicazione Flask. Creiamo un file chiamato <code>app.py</code> che analizza due template cioè due file HTML delle variabili i cui valori saranno definiti al tempo di esecuzione.</p>
<p>La struttura dei file su disco prevede una cartella radice dove posizioniamo <code>app.py</code>, <code>VisualizzaMappa</code> e la sottocartella <code>templates</code> dove andranno i template delle pagine HTML:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1"></a><span class="ex">VisualizzaMappa/</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="ex">├──</span> app.py</span>
<span id="cb12-3"><a href="#cb12-3"></a><span class="ex">├──</span> templates/</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="ex">│</span>   ├── index.html</span>
<span id="cb12-5"><a href="#cb12-5"></a><span class="ex">│</span>   └── mappa.html</span>
<span id="cb12-6"><a href="#cb12-6"></a><span class="ex">│</span>   └── route.html</span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="ex">└──</span> static/</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>app.py</code>:</p>
<div class="sourceCode" id="annotated-cell-20"><pre class="sourceCode numberSource python code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode python"><a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-20-1" class="code-annotation-target"><a href="#annotated-cell-20-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template, request</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-20-2" class="code-annotation-target"><a href="#annotated-cell-20-2"></a><span class="im">import</span> requests</span>
<span id="annotated-cell-20-3"><a href="#annotated-cell-20-3"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-20-4" class="code-annotation-target"><a href="#annotated-cell-20-4"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="annotated-cell-20-5"><a href="#annotated-cell-20-5"></a></span>
<span id="annotated-cell-20-6"><a href="#annotated-cell-20-6"></a>GOOGLE_API_KEY <span class="op">=</span> <span class="st">"INSERIRE CHIAVE API GOOGLE MAPS"</span></span>
<span id="annotated-cell-20-7"><a href="#annotated-cell-20-7"></a></span>
<span id="annotated-cell-20-8"><a href="#annotated-cell-20-8"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-20-9" class="code-annotation-target"><a href="#annotated-cell-20-9"></a><span class="at">@app.route</span>(<span class="st">'/'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<span id="annotated-cell-20-10"><a href="#annotated-cell-20-10"></a><span class="kw">def</span> home():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-20-11" class="code-annotation-target"><a href="#annotated-cell-20-11"></a>  <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-20-12" class="code-annotation-target"><a href="#annotated-cell-20-12"></a>    indirizzo <span class="op">=</span> request.form[<span class="st">'indirizzo'</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-20-13" class="code-annotation-target"><a href="#annotated-cell-20-13"></a>    visualizzazione <span class="op">=</span> request.form[<span class="st">'visualizzazione'</span>]</span>
<span id="annotated-cell-20-14"><a href="#annotated-cell-20-14"></a></span>
<span id="annotated-cell-20-15"><a href="#annotated-cell-20-15"></a>    geocode_url <span class="op">=</span> <span class="ss">f"https://maps.googleapis.com/maps/api/geocode/json?"</span> <span class="op">+</span> <span class="op">\</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="8" onclick="event.preventDefault();">8</a><span id="annotated-cell-20-16" class="code-annotation-target"><a href="#annotated-cell-20-16"></a>                  <span class="ss">f"address=</span><span class="sc">{</span>indirizzo<span class="sc">}</span><span class="ss">&amp;key=</span><span class="sc">{</span>GOOGLE_API_KEY<span class="sc">}</span><span class="ss">"</span></span>
<span id="annotated-cell-20-17"><a href="#annotated-cell-20-17"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="9" onclick="event.preventDefault();">9</a><span id="annotated-cell-20-18" class="code-annotation-target"><a href="#annotated-cell-20-18"></a>    response <span class="op">=</span> requests.get(geocode_url)</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="10" onclick="event.preventDefault();">10</a><span id="annotated-cell-20-19" class="code-annotation-target"><a href="#annotated-cell-20-19"></a>    data <span class="op">=</span> response.json()</span>
<span id="annotated-cell-20-20"><a href="#annotated-cell-20-20"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="11" onclick="event.preventDefault();">11</a><span id="annotated-cell-20-21" class="code-annotation-target"><a href="#annotated-cell-20-21"></a>    <span class="cf">if</span> data[<span class="st">'status'</span>] <span class="op">==</span> <span class="st">'OK'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="12" onclick="event.preventDefault();">12</a><span id="annotated-cell-20-22" class="code-annotation-target"><a href="#annotated-cell-20-22"></a>      result <span class="op">=</span> data[<span class="st">'results'</span>][<span class="dv">0</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="13" onclick="event.preventDefault();">13</a><span id="annotated-cell-20-23" class="code-annotation-target"><a href="#annotated-cell-20-23"></a>      dettagli <span class="op">=</span> {</span>
<span id="annotated-cell-20-24"><a href="#annotated-cell-20-24"></a>        <span class="st">'Indirizzo Formattato'</span>: result[<span class="st">'formatted_address'</span>],</span>
<span id="annotated-cell-20-25"><a href="#annotated-cell-20-25"></a>        <span class="st">'Latitudine'</span>: result[<span class="st">'geometry'</span>][<span class="st">'location'</span>][<span class="st">'lat'</span>],</span>
<span id="annotated-cell-20-26"><a href="#annotated-cell-20-26"></a>        <span class="st">'Longitudine'</span>: result[<span class="st">'geometry'</span>][<span class="st">'location'</span>][<span class="st">'lng'</span>],</span>
<span id="annotated-cell-20-27"><a href="#annotated-cell-20-27"></a>        <span class="st">'Tipo di Luogo'</span>: result[<span class="st">'types'</span>]</span>
<span id="annotated-cell-20-28"><a href="#annotated-cell-20-28"></a>      }</span>
<span id="annotated-cell-20-29"><a href="#annotated-cell-20-29"></a>    <span class="cf">else</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="14" onclick="event.preventDefault();">14</a><span id="annotated-cell-20-30" class="code-annotation-target"><a href="#annotated-cell-20-30"></a>      dettagli <span class="op">=</span> <span class="va">None</span></span>
<span id="annotated-cell-20-31"><a href="#annotated-cell-20-31"></a></span>
<span id="annotated-cell-20-32"><a href="#annotated-cell-20-32"></a>    <span class="cf">return</span> render_template(<span class="st">'mappa.html'</span>,</span>
<span id="annotated-cell-20-33"><a href="#annotated-cell-20-33"></a>                           indirizzo<span class="op">=</span>indirizzo,</span>
<span id="annotated-cell-20-34"><a href="#annotated-cell-20-34"></a>                           visualizzazione<span class="op">=</span>visualizzazione,</span>
<span id="annotated-cell-20-35"><a href="#annotated-cell-20-35"></a>                           dettagli<span class="op">=</span>dettagli,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="15" onclick="event.preventDefault();">15</a><span id="annotated-cell-20-36" class="code-annotation-target"><a href="#annotated-cell-20-36"></a>                           api_key<span class="op">=</span>GOOGLE_API_KEY)</span>
<span id="annotated-cell-20-37"><a href="#annotated-cell-20-37"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="16" onclick="event.preventDefault();">16</a><span id="annotated-cell-20-38" class="code-annotation-target"><a href="#annotated-cell-20-38"></a>  <span class="cf">return</span> render_template(<span class="st">'index.html'</span>)</span>
<span id="annotated-cell-20-39"><a href="#annotated-cell-20-39"></a></span>
<span id="annotated-cell-20-40"><a href="#annotated-cell-20-40"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="17" onclick="event.preventDefault();">17</a><span id="annotated-cell-20-41" class="code-annotation-target"><a href="#annotated-cell-20-41"></a><span class="at">@app.route</span>(<span class="st">'/route'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<span id="annotated-cell-20-42"><a href="#annotated-cell-20-42"></a><span class="kw">def</span> route():</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="18" onclick="event.preventDefault();">18</a><span id="annotated-cell-20-43" class="code-annotation-target"><a href="#annotated-cell-20-43"></a>  <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="19" onclick="event.preventDefault();">19</a><span id="annotated-cell-20-44" class="code-annotation-target"><a href="#annotated-cell-20-44"></a>    start <span class="op">=</span> request.form[<span class="st">'start'</span>]</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="20" onclick="event.preventDefault();">20</a><span id="annotated-cell-20-45" class="code-annotation-target"><a href="#annotated-cell-20-45"></a>    end <span class="op">=</span> request.form[<span class="st">'end'</span>]</span>
<span id="annotated-cell-20-46"><a href="#annotated-cell-20-46"></a></span>
<span id="annotated-cell-20-47"><a href="#annotated-cell-20-47"></a>    <span class="cf">return</span> render_template(<span class="st">'route.html'</span>,</span>
<span id="annotated-cell-20-48"><a href="#annotated-cell-20-48"></a>                           start<span class="op">=</span>start,</span>
<span id="annotated-cell-20-49"><a href="#annotated-cell-20-49"></a>                           end<span class="op">=</span>end,</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="21" onclick="event.preventDefault();">21</a><span id="annotated-cell-20-50" class="code-annotation-target"><a href="#annotated-cell-20-50"></a>                           api_key<span class="op">=</span>GOOGLE_API_KEY)</span>
<span id="annotated-cell-20-51"><a href="#annotated-cell-20-51"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="22" onclick="event.preventDefault();">22</a><span id="annotated-cell-20-52" class="code-annotation-target"><a href="#annotated-cell-20-52"></a>  <span class="cf">return</span> render_template(<span class="st">'route_form.html'</span>)</span>
<span id="annotated-cell-20-53"><a href="#annotated-cell-20-53"></a></span>
<span id="annotated-cell-20-54"><a href="#annotated-cell-20-54"></a></span>
<span id="annotated-cell-20-55"><a href="#annotated-cell-20-55"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-20" data-target-annotation="23" onclick="event.preventDefault();">23</a><span id="annotated-cell-20-56" class="code-annotation-target"><a href="#annotated-cell-20-56"></a>  app.run(debug<span class="op">=</span><span class="va">True</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-20" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="1" data-code-annotation="1">Importa Flask e i moduli necessari per gestire le richieste e i template.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="2" data-code-annotation="2">Importa il modulo requests per effettuare richieste HTTP.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="4" data-code-annotation="3">Crea l’istanza dell’applicazione Flask.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="9" data-code-annotation="4">Definisce una route per la homepage, che accetta sia richieste <code>GET</code> che <code>POST</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="11" data-code-annotation="5">Controlla se la richiesta è di tipo <code>POST</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="12" data-code-annotation="6">Ottiene l’indirizzo inserito dall’utente nel modulo HTML.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="13" data-code-annotation="7">Ottiene il tipo di visualizzazione selezionato dall’utente nel modulo HTML.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="16" data-code-annotation="8">Costruisce l’URL per l’API di Google Maps per ottenere i dettagli dell’indirizzo.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="18" data-code-annotation="9">Effettua una richiesta HTTP all’API di Google Maps.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="19" data-code-annotation="10">Converte la risposta JSON in un dizionario Python.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="21" data-code-annotation="11">Controlla se la richiesta all’API di Google Maps è andata a buon fine.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="22" data-code-annotation="12">Ottiene il primo risultato dalla risposta dell’API.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="23" data-code-annotation="13">Estrae i dettagli dell’indirizzo dalla risposta dell’API.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="30" data-code-annotation="14">Se la richiesta all’API di Google Maps non è andata a buon fine, imposta <code>dettagli</code> a <code>None</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="36" data-code-annotation="15">Renderizza il template <code>mappa.html</code>, passando l’indirizzo, il tipo di visualizzazione e i dettagli come variabili.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="16">16</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="38" data-code-annotation="16">Renderizza il template <code>index.html</code> per le richieste <code>GET</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="17">17</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="41" data-code-annotation="17">Definisce una route per il percorso, che accetta sia richieste <code>GET</code> che <code>POST</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="18">18</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="43" data-code-annotation="18">Controlla se la richiesta è di tipo <code>POST</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="19">19</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="44" data-code-annotation="19">Ottiene l’indirizzo di partenza inserito dall’utente nel modulo HTML.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="20">20</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="45" data-code-annotation="20">Ottiene l’indirizzo di arrivo inserito dall’utente nel modulo HTML.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="21">21</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="50" data-code-annotation="21">Renderizza il template <code>route.html</code>, passando gli indirizzi di partenza e arrivo come variabili.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="22">22</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="52" data-code-annotation="22">Renderizza il template <code>route_form.html</code> per le richieste <code>GET</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-20" data-target-annotation="23">23</dt>
<dd>
<span data-code-cell="annotated-cell-20" data-code-lines="56" data-code-annotation="23">Avvia l’applicazione Flask in modalità debug.</span>
</dd>
</dl>
</section>
<section id="passaggio-2-implementazione-della-pagina-web-per-inserimento-indirizzo" class="level3" data-number="20.5.2">
<h3 data-number="20.5.2" class="anchored" data-anchor-id="passaggio-2-implementazione-della-pagina-web-per-inserimento-indirizzo"><span class="header-section-number">20.5.2</span> Passaggio 2: implementazione della pagina web per inserimento indirizzo</h3>
<p>Creiamo una pagina web che permetta agli utenti di inserire un indirizzo e selezionare il tipo di visualizzazione della mappa. Creiamo un file chiamato <code>templates/index.html</code>.</p>
<div class="sourceCode" id="annotated-cell-21"><pre class="sourceCode numberSource html code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode html"><span id="annotated-cell-21-1"><a href="#annotated-cell-21-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="annotated-cell-21-2"><a href="#annotated-cell-21-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-3"><a href="#annotated-cell-21-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-4"><a href="#annotated-cell-21-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Inserisci Indirizzo<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-5"><a href="#annotated-cell-21-5"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-6"><a href="#annotated-cell-21-6"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-7"><a href="#annotated-cell-21-7"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Inserisci un indirizzo<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-8"><a href="#annotated-cell-21-8"></a>  <span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> method</span><span class="op">=</span><span class="st">"post"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-9"><a href="#annotated-cell-21-9"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"indirizzo"</span><span class="dt">&gt;</span>Indirizzo:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-21-10" class="code-annotation-target"><a href="#annotated-cell-21-10"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"indirizzo"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"indirizzo"</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-11"><a href="#annotated-cell-21-11"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"visualizzazione"</span><span class="dt">&gt;</span>Visualizzazione:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-21-12" class="code-annotation-target"><a href="#annotated-cell-21-12"></a>    <span class="dt">&lt;</span><span class="kw">select</span><span class="ot"> id</span><span class="op">=</span><span class="st">"visualizzazione"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"visualizzazione"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-13"><a href="#annotated-cell-21-13"></a>      <span class="dt">&lt;</span><span class="kw">option</span><span class="ot"> value</span><span class="op">=</span><span class="st">"roadmap"</span><span class="dt">&gt;</span>Mappa<span class="dt">&lt;/</span><span class="kw">option</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-14"><a href="#annotated-cell-21-14"></a>      <span class="dt">&lt;</span><span class="kw">option</span><span class="ot"> value</span><span class="op">=</span><span class="st">"satellite"</span><span class="dt">&gt;</span>Satellite<span class="dt">&lt;/</span><span class="kw">option</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-15"><a href="#annotated-cell-21-15"></a>      <span class="dt">&lt;</span><span class="kw">option</span><span class="ot"> value</span><span class="op">=</span><span class="st">"terrain"</span><span class="dt">&gt;</span>Terreno<span class="dt">&lt;/</span><span class="kw">option</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-16"><a href="#annotated-cell-21-16"></a>    <span class="dt">&lt;/</span><span class="kw">select</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-21" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-21-17" class="code-annotation-target"><a href="#annotated-cell-21-17"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"submit"</span><span class="ot"> value</span><span class="op">=</span><span class="st">"Mostra Mappa"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-18"><a href="#annotated-cell-21-18"></a>  <span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-19"><a href="#annotated-cell-21-19"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Traccia un percorso<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-20"><a href="#annotated-cell-21-20"></a>  <span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> method</span><span class="op">=</span><span class="st">"post"</span><span class="ot"> action</span><span class="op">=</span><span class="st">"/route"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-21"><a href="#annotated-cell-21-21"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"start"</span><span class="dt">&gt;</span>Partenza:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-22"><a href="#annotated-cell-21-22"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"start"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"start"</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-23"><a href="#annotated-cell-21-23"></a>    <span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for</span><span class="op">=</span><span class="st">"end"</span><span class="dt">&gt;</span>Arrivo:<span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-24"><a href="#annotated-cell-21-24"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"text"</span><span class="ot"> id</span><span class="op">=</span><span class="st">"end"</span><span class="ot"> name</span><span class="op">=</span><span class="st">"end"</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-25"><a href="#annotated-cell-21-25"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">"submit"</span><span class="ot"> value</span><span class="op">=</span><span class="st">"Traccia Percorso"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-26"><a href="#annotated-cell-21-26"></a>  <span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-27"><a href="#annotated-cell-21-27"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-21-28"><a href="#annotated-cell-21-28"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-21" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="10" data-code-annotation="1">Campo di input per l’indirizzo.</span>
</dd>
<dt data-target-cell="annotated-cell-21" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="12" data-code-annotation="2">Dropdown per selezionare il tipo di visualizzazione della mappa.</span>
</dd>
<dt data-target-cell="annotated-cell-21" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-21" data-code-lines="17" data-code-annotation="3">Pulsante di invio per il modulo.</span>
</dd>
</dl>
</section>
<section id="passaggio-3-integrazione-di-google-maps" class="level3" data-number="20.5.3">
<h3 data-number="20.5.3" class="anchored" data-anchor-id="passaggio-3-integrazione-di-google-maps"><span class="header-section-number">20.5.3</span> Passaggio 3: integrazione di Google Maps</h3>
<p>Creiamo un template per visualizzare la mappa di Google. Creiamo un file chiamato <code>templates/mappa.html</code>.</p>
<div class="sourceCode" id="annotated-cell-22"><pre class="sourceCode numberSource html code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode html"><span id="annotated-cell-22-1"><a href="#annotated-cell-22-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="annotated-cell-22-2"><a href="#annotated-cell-22-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-3"><a href="#annotated-cell-22-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-4"><a href="#annotated-cell-22-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Mappa<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-22-5" class="code-annotation-target"><a href="#annotated-cell-22-5"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://maps.googleapis.com/maps/api/js?key={{ api_key }}</span><span class="er">&amp;</span><span class="st">libraries=places"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-6"><a href="#annotated-cell-22-6"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-7"><a href="#annotated-cell-22-7"></a>    <span class="kw">function</span> <span class="fu">initMap</span>() {</span>
<span id="annotated-cell-22-8"><a href="#annotated-cell-22-8"></a>      <span class="kw">var</span> geocoder <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">Geocoder</span>()<span class="op">;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-22-9" class="code-annotation-target"><a href="#annotated-cell-22-9"></a>      <span class="kw">var</span> indirizzo <span class="op">=</span> <span class="st">"{{ indirizzo }}"</span><span class="op">;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-22-10" class="code-annotation-target"><a href="#annotated-cell-22-10"></a>      <span class="kw">var</span> visualizzazione <span class="op">=</span> <span class="st">"{{ visualizzazione }}"</span><span class="op">;</span></span>
<span id="annotated-cell-22-11"><a href="#annotated-cell-22-11"></a>      geocoder<span class="op">.</span><span class="fu">geocode</span>({<span class="st">'address'</span><span class="op">:</span> indirizzo}<span class="op">,</span> <span class="kw">function</span>(results<span class="op">,</span> status) {</span>
<span id="annotated-cell-22-12"><a href="#annotated-cell-22-12"></a>        <span class="cf">if</span> (status <span class="op">===</span> <span class="st">'OK'</span>) {</span>
<span id="annotated-cell-22-13"><a href="#annotated-cell-22-13"></a>          <span class="kw">var</span> mapOptions <span class="op">=</span> {</span>
<span id="annotated-cell-22-14"><a href="#annotated-cell-22-14"></a>            <span class="dt">zoom</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="annotated-cell-22-15"><a href="#annotated-cell-22-15"></a>            <span class="dt">center</span><span class="op">:</span> results[<span class="dv">0</span>]<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">location</span><span class="op">,</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-22-16" class="code-annotation-target"><a href="#annotated-cell-22-16"></a>            <span class="dt">mapTypeId</span><span class="op">:</span> visualizzazione<span class="op">,</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-22-17" class="code-annotation-target"><a href="#annotated-cell-22-17"></a>            <span class="dt">tilt</span><span class="op">:</span> <span class="dv">45</span></span>
<span id="annotated-cell-22-18"><a href="#annotated-cell-22-18"></a>          }<span class="op">;</span></span>
<span id="annotated-cell-22-19"><a href="#annotated-cell-22-19"></a>          <span class="kw">var</span> map <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">Map</span>(<span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'map'</span>)<span class="op">,</span> mapOptions)<span class="op">;</span></span>
<span id="annotated-cell-22-20"><a href="#annotated-cell-22-20"></a></span>
<span id="annotated-cell-22-21"><a href="#annotated-cell-22-21"></a>          <span class="kw">var</span> service <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="at">places</span><span class="op">.</span><span class="fu">PlacesService</span>(map)<span class="op">;</span></span>
<span id="annotated-cell-22-22"><a href="#annotated-cell-22-22"></a>          service<span class="op">.</span><span class="fu">nearbySearch</span>({</span>
<span id="annotated-cell-22-23"><a href="#annotated-cell-22-23"></a>            <span class="dt">location</span><span class="op">:</span> results[<span class="dv">0</span>]<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">location</span><span class="op">,</span></span>
<span id="annotated-cell-22-24"><a href="#annotated-cell-22-24"></a>            <span class="dt">radius</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="annotated-cell-22-25"><a href="#annotated-cell-22-25"></a>            <span class="dt">type</span><span class="op">:</span> [<span class="st">'restaurant'</span>]</span>
<span id="annotated-cell-22-26"><a href="#annotated-cell-22-26"></a>          }<span class="op">,</span> <span class="kw">function</span>(results<span class="op">,</span> status) {</span>
<span id="annotated-cell-22-27"><a href="#annotated-cell-22-27"></a>            <span class="cf">if</span> (status <span class="op">===</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="at">places</span><span class="op">.</span><span class="at">PlacesServiceStatus</span><span class="op">.</span><span class="at">OK</span>) {</span>
<span id="annotated-cell-22-28"><a href="#annotated-cell-22-28"></a>              <span class="cf">for</span> (<span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> results<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="annotated-cell-22-29"><a href="#annotated-cell-22-29"></a>                <span class="kw">var</span> place <span class="op">=</span> results[i]<span class="op">;</span></span>
<span id="annotated-cell-22-30"><a href="#annotated-cell-22-30"></a>                <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">Marker</span>({</span>
<span id="annotated-cell-22-31"><a href="#annotated-cell-22-31"></a>                  <span class="dt">position</span><span class="op">:</span> place<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">location</span><span class="op">,</span></span>
<span id="annotated-cell-22-32"><a href="#annotated-cell-22-32"></a>                  <span class="dt">map</span><span class="op">:</span> map<span class="op">,</span></span>
<span id="annotated-cell-22-33"><a href="#annotated-cell-22-33"></a>                  <span class="dt">title</span><span class="op">:</span> place<span class="op">.</span><span class="at">name</span></span>
<span id="annotated-cell-22-34"><a href="#annotated-cell-22-34"></a>                })<span class="op">;</span></span>
<span id="annotated-cell-22-35"><a href="#annotated-cell-22-35"></a>              }</span>
<span id="annotated-cell-22-36"><a href="#annotated-cell-22-36"></a>            }</span>
<span id="annotated-cell-22-37"><a href="#annotated-cell-22-37"></a>          })<span class="op">;</span></span>
<span id="annotated-cell-22-38"><a href="#annotated-cell-22-38"></a></span>
<span id="annotated-cell-22-39"><a href="#annotated-cell-22-39"></a>          <span class="kw">var</span> panorama <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">StreetViewPanorama</span>(</span>
<span id="annotated-cell-22-40"><a href="#annotated-cell-22-40"></a>            <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'street-view'</span>)<span class="op">,</span> {</span>
<span id="annotated-cell-22-41"><a href="#annotated-cell-22-41"></a>              <span class="dt">position</span><span class="op">:</span> results[<span class="dv">0</span>]<span class="op">.</span><span class="at">geometry</span><span class="op">.</span><span class="at">location</span><span class="op">,</span></span>
<span id="annotated-cell-22-42"><a href="#annotated-cell-22-42"></a>              <span class="dt">pov</span><span class="op">:</span> {</span>
<span id="annotated-cell-22-43"><a href="#annotated-cell-22-43"></a>                <span class="dt">heading</span><span class="op">:</span> <span class="dv">34</span><span class="op">,</span></span>
<span id="annotated-cell-22-44"><a href="#annotated-cell-22-44"></a>                <span class="dt">pitch</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="annotated-cell-22-45"><a href="#annotated-cell-22-45"></a>              }</span>
<span id="annotated-cell-22-46"><a href="#annotated-cell-22-46"></a>            })<span class="op">;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-22-47" class="code-annotation-target"><a href="#annotated-cell-22-47"></a>          map<span class="op">.</span><span class="fu">setStreetView</span>(panorama)<span class="op">;</span></span>
<span id="annotated-cell-22-48"><a href="#annotated-cell-22-48"></a>        } <span class="cf">else</span> {</span>
<span id="annotated-cell-22-49"><a href="#annotated-cell-22-49"></a>          <span class="fu">alert</span>(<span class="st">'Geocode non riuscito per il seguente motivo: '</span> <span class="op">+</span> status)<span class="op">;</span></span>
<span id="annotated-cell-22-50"><a href="#annotated-cell-22-50"></a>        }</span>
<span id="annotated-cell-22-51"><a href="#annotated-cell-22-51"></a>      })<span class="op">;</span></span>
<span id="annotated-cell-22-52"><a href="#annotated-cell-22-52"></a>    }</span>
<span id="annotated-cell-22-53"><a href="#annotated-cell-22-53"></a>  <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-54"><a href="#annotated-cell-22-54"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="7" onclick="event.preventDefault();">7</a><span id="annotated-cell-22-55" class="code-annotation-target"><a href="#annotated-cell-22-55"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="ot"> onload</span><span class="op">=</span><span class="st">"initMap()"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-56"><a href="#annotated-cell-22-56"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Mappa di {{ indirizzo }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="8" onclick="event.preventDefault();">8</a><span id="annotated-cell-22-57" class="code-annotation-target"><a href="#annotated-cell-22-57"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"map"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height: 500px; width: 100%;"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="9" onclick="event.preventDefault();">9</a><span id="annotated-cell-22-58" class="code-annotation-target"><a href="#annotated-cell-22-58"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"street-view"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height: 500px; width: 100%; margin-top: 20px;"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="10" onclick="event.preventDefault();">10</a><span id="annotated-cell-22-59" class="code-annotation-target"><a href="#annotated-cell-22-59"></a>  {% if dettagli %}</span>
<span id="annotated-cell-22-60"><a href="#annotated-cell-22-60"></a>  <span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Dettagli Indirizzo<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-61"><a href="#annotated-cell-22-61"></a>  <span class="dt">&lt;</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-62"><a href="#annotated-cell-22-62"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Chiave<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Valore<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-63"><a href="#annotated-cell-22-63"></a>    {% for chiave, valore in dettagli.items() %}</span>
<span id="annotated-cell-22-64"><a href="#annotated-cell-22-64"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ chiave }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;</span><span class="kw">td</span><span class="dt">&gt;</span>{{ valore }}<span class="dt">&lt;/</span><span class="kw">td</span><span class="dt">&gt;&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-65"><a href="#annotated-cell-22-65"></a>    {% endfor %}</span>
<span id="annotated-cell-22-66"><a href="#annotated-cell-22-66"></a>  <span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="11" onclick="event.preventDefault();">11</a><span id="annotated-cell-22-67" class="code-annotation-target"><a href="#annotated-cell-22-67"></a>  {% else %}</span>
<span id="annotated-cell-22-68"><a href="#annotated-cell-22-68"></a>  <span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>Dettagli non disponibili.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-69"><a href="#annotated-cell-22-69"></a>  {% endif %}</span>
<span id="annotated-cell-22-70"><a href="#annotated-cell-22-70"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-22-71"><a href="#annotated-cell-22-71"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-22" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="5" data-code-annotation="1">Carica l’API di Google Maps con la chiave API.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="9" data-code-annotation="2">Inserisce l’indirizzo passato dal backend.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="10" data-code-annotation="3">Inserisce il tipo di visualizzazione passato dal backend.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="16" data-code-annotation="4">Imposta il tipo di visualizzazione della mappa.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="17" data-code-annotation="5">Aggiunge l’inclinazione per la visualizzazione 3D.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="47" data-code-annotation="6">Utilizza l’API di Street View per creare una vista 3D interattiva.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="55" data-code-annotation="7">Chiama la funzione <code>initMap</code> quando la pagina è caricata.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="57" data-code-annotation="8"><code>div</code> per visualizzare la mappa.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="58" data-code-annotation="9"><code>div</code> per visualizzare la Street View sotto la mappa principale.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="59" data-code-annotation="10">Controlla se i dettagli dell’indirizzo sono disponibili.</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="67" data-code-annotation="11">Messaggio di fallback se i dettagli non sono disponibili.</span>
</dd>
</dl>
<p>Creiamo un template per tracciare il percorso. Creiamo un file chiamato <code>templates/route.html</code>.</p>
<div class="sourceCode" id="annotated-cell-23"><pre class="sourceCode numberSource html code-annotation-code number-lines code-with-copy code-annotated"><code class="sourceCode html"><span id="annotated-cell-23-1"><a href="#annotated-cell-23-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="annotated-cell-23-2"><a href="#annotated-cell-23-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-3"><a href="#annotated-cell-23-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-4"><a href="#annotated-cell-23-4"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Percorso<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-23" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-23-5" class="code-annotation-target"><a href="#annotated-cell-23-5"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://maps.googleapis.com/maps/api/js?key={{ api_key }}"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-6"><a href="#annotated-cell-23-6"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-7"><a href="#annotated-cell-23-7"></a>    <span class="kw">function</span> <span class="fu">initMap</span>() {</span>
<span id="annotated-cell-23-8"><a href="#annotated-cell-23-8"></a>      <span class="kw">var</span> directionsService <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">DirectionsService</span>()<span class="op">;</span></span>
<span id="annotated-cell-23-9"><a href="#annotated-cell-23-9"></a>      <span class="kw">var</span> directionsRenderer <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">DirectionsRenderer</span>()<span class="op">;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-23" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-23-10" class="code-annotation-target"><a href="#annotated-cell-23-10"></a>      <span class="kw">var</span> start <span class="op">=</span> <span class="st">"{{ start }}"</span><span class="op">;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-23" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-23-11" class="code-annotation-target"><a href="#annotated-cell-23-11"></a>      <span class="kw">var</span> end <span class="op">=</span> <span class="st">"{{ end }}"</span><span class="op">;</span></span>
<span id="annotated-cell-23-12"><a href="#annotated-cell-23-12"></a>      <span class="kw">var</span> map <span class="op">=</span> <span class="kw">new</span> google<span class="op">.</span><span class="at">maps</span><span class="op">.</span><span class="fu">Map</span>(<span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'map'</span>)<span class="op">,</span> {</span>
<span id="annotated-cell-23-13"><a href="#annotated-cell-23-13"></a>        <span class="dt">zoom</span><span class="op">:</span> <span class="dv">7</span><span class="op">,</span></span>
<span id="annotated-cell-23-14"><a href="#annotated-cell-23-14"></a>        <span class="dt">center</span><span class="op">:</span> {<span class="dt">lat</span><span class="op">:</span> <span class="fl">41.85</span><span class="op">,</span> <span class="dt">lng</span><span class="op">:</span> <span class="op">-</span><span class="fl">87.65</span>}</span>
<span id="annotated-cell-23-15"><a href="#annotated-cell-23-15"></a>      })<span class="op">;</span></span>
<span id="annotated-cell-23-16"><a href="#annotated-cell-23-16"></a>      directionsRenderer<span class="op">.</span><span class="fu">setMap</span>(map)<span class="op">;</span></span>
<span id="annotated-cell-23-17"><a href="#annotated-cell-23-17"></a>      <span class="kw">var</span> request <span class="op">=</span> {</span>
<span id="annotated-cell-23-18"><a href="#annotated-cell-23-18"></a>        <span class="dt">origin</span><span class="op">:</span> start<span class="op">,</span></span>
<span id="annotated-cell-23-19"><a href="#annotated-cell-23-19"></a>        <span class="dt">destination</span><span class="op">:</span> end<span class="op">,</span></span>
<span id="annotated-cell-23-20"><a href="#annotated-cell-23-20"></a>        <span class="dt">travelMode</span><span class="op">:</span> <span class="st">'DRIVING'</span></span>
<span id="annotated-cell-23-21"><a href="#annotated-cell-23-21"></a>      }<span class="op">;</span></span>
<span id="annotated-cell-23-22"><a href="#annotated-cell-23-22"></a>      directionsService<span class="op">.</span><span class="fu">route</span>(request<span class="op">,</span> <span class="kw">function</span>(result<span class="op">,</span> status) {</span>
<span id="annotated-cell-23-23"><a href="#annotated-cell-23-23"></a>        <span class="cf">if</span> (status <span class="op">===</span> <span class="st">'OK'</span>) {</span>
<span id="annotated-cell-23-24"><a href="#annotated-cell-23-24"></a>          directionsRenderer<span class="op">.</span><span class="fu">setDirections</span>(result)<span class="op">;</span></span>
<span id="annotated-cell-23-25"><a href="#annotated-cell-23-25"></a>        } <span class="cf">else</span> {</span>
<span id="annotated-cell-23-26"><a href="#annotated-cell-23-26"></a>          <span class="fu">alert</span>(<span class="st">'Directions request failed due to '</span> <span class="op">+</span> status)<span class="op">;</span></span>
<span id="annotated-cell-23-27"><a href="#annotated-cell-23-27"></a>        }</span>
<span id="annotated-cell-23-28"><a href="#annotated-cell-23-28"></a>      })<span class="op">;</span></span>
<span id="annotated-cell-23-29"><a href="#annotated-cell-23-29"></a>    }</span>
<span id="annotated-cell-23-30"><a href="#annotated-cell-23-30"></a>  <span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-31"><a href="#annotated-cell-23-31"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-23" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-23-32" class="code-annotation-target"><a href="#annotated-cell-23-32"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="ot"> onload</span><span class="op">=</span><span class="st">"initMap()"</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-33"><a href="#annotated-cell-23-33"></a>  <span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Percorso da {{ start }} a {{ end }}<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-23" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-23-34" class="code-annotation-target"><a href="#annotated-cell-23-34"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"map"</span><span class="ot"> style</span><span class="op">=</span><span class="st">"height: 500px; width: 100%;"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-35"><a href="#annotated-cell-23-35"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-23-36"><a href="#annotated-cell-23-36"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-23" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-23" data-code-lines="5" data-code-annotation="1">Carica l’API di Google Maps con la chiave API.</span>
</dd>
<dt data-target-cell="annotated-cell-23" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-23" data-code-lines="10" data-code-annotation="2">Inserisce l’indirizzo di partenza passato dal backend.</span>
</dd>
<dt data-target-cell="annotated-cell-23" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-23" data-code-lines="11" data-code-annotation="3">Inserisce l’indirizzo di arrivo passato dal backend.</span>
</dd>
<dt data-target-cell="annotated-cell-23" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-23" data-code-lines="32" data-code-annotation="4">Chiama la funzione <code>initMap</code> quando la pagina è caricata.</span>
</dd>
<dt data-target-cell="annotated-cell-23" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-23" data-code-lines="34" data-code-annotation="5"><code>div</code> per visualizzare il percorso sulla mappa.</span>
</dd>
</dl>
</section>
<section id="passaggio-4-test-dellapplicazione" class="level3" data-number="20.5.4">
<h3 data-number="20.5.4" class="anchored" data-anchor-id="passaggio-4-test-dellapplicazione"><span class="header-section-number">20.5.4</span> Passaggio 4: test dell’applicazione</h3>
<p>Eseguiamo l’applicazione Flask:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1"></a><span class="ex">python</span> app.py</span></code><button title="Copia negli appunti" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Apriamo il browser e navighiamo all’indirizzo <code>http://127.0.0.1:5000/</code>. Inseriamo un indirizzo, selezioniamo il tipo di visualizzazione e clicchiamo su <code>Mostra Mappa</code>. La mappa di Google dovrebbe essere visualizzata con l’indirizzo inserito e il tipo di visualizzazione selezionato. Inoltre, possiamo inserire gli indirizzi di partenza e arrivo per tracciare un percorso sulla mappa. I dettagli dell’indirizzo verranno mostrati in una tabella sotto la mappa.</p>
</section>
</section>
<section id="file" class="level2" data-number="20.6">
<h2 data-number="20.6" class="anchored" data-anchor-id="file"><span class="header-section-number">20.6</span> File</h2>
<p><a href="esercitazioni/3.1/app.py">app.py</a></p>
<p><a href="esercitazioni/3.1/index.html">index.html</a></p>
<p><a href="esercitazioni/3.1/mappa.html">mappa.html</a></p>
<p><a href="esercitazioni/3.1/route.html">route.html</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiato!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiato!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./terza-parte-python-moduli.html" class="pagination-link" aria-label="Moduli">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Moduli</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./quarta-parte.html" class="pagination-link" aria-label="Quarta parte: Python avanzato">
        <span class="nav-page-text">Quarta parte: Python avanzato</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./antonio.html">
<p>Antonio Montano</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="./come-collaborare.html">
<p>Come collaborare</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://4m4.it">
<p>4m4</p>
</a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/antomon/corso-python/edit/main/terza-parte-python-esercitazione-uno.qmd" class="toc-action"><i class="bi bi-github"></i>Modifica questa pagina</a></li><li><a href="https://github.com/antomon/corso-python/blob/main/terza-parte-python-esercitazione-uno.qmd" class="toc-action"><i class="bi empty"></i>Mostra il codice</a></li><li><a href="https://github.com/antomon/corso-python/issues/new/choose" class="toc-action"><i class="bi empty"></i>Segnala un problema</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>